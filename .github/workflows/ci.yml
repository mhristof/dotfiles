name: ci

on:
  - push

jobs:
  build:
    strategy:
      matrix:
        platform:
        #- ubuntu-latest
          - macos-latest
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v2
      - run: make brew
      - run: brew install --build-from-source perl
      - run: brew install --build-from-source gettext
      - run: brew install --build-from-source lua
      - run: brew install --build-from-source perl
      - run: brew install --build-from-source pkg-config
      - run: brew install --build-from-source gdbm
      - run: brew install --build-from-source openssl@1.1
      - run: brew install --build-from-source readline
      - run: brew install --build-from-source sqlite
      - run: brew install --build-from-source tcl-tk
      - run: brew install --build-from-source xz
      - run: brew install --build-from-source python@3.9
      - run: brew install --build-from-source libyaml
      - run: brew install --build-from-source ruby
      - run: make vim || cat /Users/runner/Library/Logs/Homebrew/perl/02.make
