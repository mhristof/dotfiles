# vi: ft=sh

if [[ ! -z $BASH ]]; then
    THIS_SHELL=bash
else
    THIS_SHELL=$(basename $SHELL)
fi

export GIT_EMAIL="mhristof@gmail.com"

# allow the next section to re-arrange paths
export PATH=/usr/local/sbin:/usr/local/bin:$PATH

for f in ~/.autojump/etc/profile.d/autojump.sh \
         ~/.bash/alias \
         ~/.bash/alias.$(uname) \
         ~/.bash/checks \
         ~/.bash/functions \
         ~/.fzf.${THIS_SHELL} \
         ~/.bash/$THIS_SHELL \
         ~/.iterm2_shell_integration.$THIS_SHELL \
         ~/.bashrc_local; do
    if [[ -f $f ]]; then
        source $f;
    fi
done

export EDITOR="vim -X"
export PATH=/usr/local/opt/python/bin:$PATH
export PATH=~/Library/Python/2.7/bin:$PATH
export PATH=~/.fzf/bin:$PATH
export PATH=~/.global-modules/bin/:$PATH
export PATH=~/.yarn/bin:$PATH
export PATH=~/umbrella/bin:$PATH
export PATH=/usr/local/opt/coreutils/libexec/gnubin:$PATH
export PATH=/usr/local/opt/findutils/libexec/gnubin:$PATH
export PATH=~/bin:$PATH

which go | grep -v alias &> /dev/null && {
    export GOPATH=$(go env GOPATH)
    export PATH=$GOPATH/bin:$PATH
}

export PATH=$(echo -n $PATH | awk -v RS=: -v ORS=: '!arr[$0]++') # remove duplicates

export PYTHONSTARTUP=~/.pythonrc.py

export HISTCONTROL=ignoredups:erasedups

if [[ $THIS_SHELL == "bash" ]]; then
    # When the shell exits, append to the history file instead of overwriting it
    shopt -s histappend
fi


# After each command, append to the history file and reread it
export HISTSIZE=99999999
export HISTFILESIZE=
export HISTTIMEFORMAT='%F %T '

export LESSOPEN="| highlight %s -O xterm256"

ssh-add -l | grep id_rsa &> /dev/null || ssh-add ~/.ssh/id_rsa
